<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Jason&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Jason&#39;s Blog">
<meta property="og:url" content="https://jasonchenwork.github.io/index.html">
<meta property="og:site_name" content="Jason&#39;s Blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Jason Chen">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Jason's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 8.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jason&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜尋"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜尋"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://jasonchenwork.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-那一天我從MCU上學到的-11" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/12/10/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-11/" class="article-date">
  <time class="dt-published" datetime="2025-12-10T09:50:58.000Z" itemprop="datePublished">2025-12-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/12/10/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-11/">那一天我從MCU上學到的(11)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>今天要介紹過去做過有趣的專案，這專案主要是用我們的產品當作副廠拿來賣，因此我們需要與原廠產品與主機的通訊協定一樣。我要負責解析原廠的通訊然後複製在我們的產品上，簡單來講就是仿制原廠通訊過程，當主機下如何指令時我們需要回應甚麼指令。在分析的過程中，我覺得可以使用function ptr建立一個model，這樣以後要複製其他廠家的協定只需maintain 我的table即可。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_PACKETDATA  512</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> CommData[MAX_PACKETDATA];</span><br><span class="line"><span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">char</span> SendByteIdx;      </span><br><span class="line"><span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">char</span> RecdByteIdx;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line"> <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">char</span> *pCommPacketBuf;</span><br><span class="line"> <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">short</span> Len;</span><br><span class="line"> <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">char</span> ErrorFlag;</span><br><span class="line">&#125;ST_PACKET;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="title function_">void</span> <span class="params">(*func)</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">funcNop</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line">ST_PACKET st_CommSenddata;</span><br><span class="line">ST_PACKET st_CommRecddata;</span><br><span class="line">func g_SendStopHandle = funcNop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line"> <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">short</span> CMD;</span><br><span class="line"> <span class="type">unsigned</span> <span class="type">char</span> *RecdBuffer;</span><br><span class="line"> <span class="type">unsigned</span> <span class="type">char</span> RecdBufferLen;</span><br><span class="line"> <span class="type">unsigned</span> <span class="type">char</span> *SendBuffer;</span><br><span class="line"> <span class="type">unsigned</span> <span class="type">char</span> SendBufferLen;</span><br><span class="line"> func RecdStopHandle;</span><br><span class="line"> func SendStopHandle;</span><br><span class="line">&#125;ST_REGTABLE;</span><br><span class="line">ST_REGTABLE </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> NELEMS(x)  (sizeof(x) / sizeof((x)[0])) </span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> INFO_VERSION[<span class="number">8</span>] = &#123;<span class="number">0xAA</span>,<span class="number">0xAA</span>,<span class="number">0xAA</span>,<span class="number">0xAA</span>,<span class="number">0xAA</span>,<span class="number">0xAA</span>,<span class="number">0xAA0</span>,<span class="number">0xAA</span>&#125;;</span><br><span class="line"><span class="type">void</span> <span class="title function_">funcRecd0x0001</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">     <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#123;CMD, RecdBuffer, RecdBufLen, SendBuffer, SendBufLen, RecdHandle, SendHanle&#125;</span></span><br><span class="line">ST_REGTABLE st_RegTable[]=&#123;&#123;<span class="number">0x0000</span>,<span class="literal">NULL</span>,<span class="number">0</span>,INFO_VERSION,NELEMS(INFO_VERSION),funcNop,funcNop&#125;,</span><br><span class="line">&#123;<span class="number">0x0001</span>,&amp;ctrl_mode,<span class="number">1</span>,&amp;ctrl_mode,<span class="number">1</span>,funcRecd0x0001,funcNop&#125;,\&#125;;</span><br></pre></td></tr></table></figure>

<p>以上就是定義變數與TABLE的部分，使用一個BUFFER暫存主機的資料，然後當通訊完成時，我們在判斷這筆資料要如何處裡這裡透過st_RegTable 先尋找是否有對應的cmd，如果找到對應的cmd我們就會針對此cmd進行對應的action。假設主機的cmd為0x0000，我只須回應對應的封包即可。<br>這是function ptr的應用之一，function ptr可以讓程式簡潔有效率，如果不使用function ptr來仿製其他家的通訊協定就需要寫一堆if else or switch case導致code很難maintain。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jasonchenwork.github.io/2025/12/10/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-11/" data-id="cuidDPdceHtuQuRUPviKHP-Dd" data-title="那一天我從MCU上學到的(11)" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84/" rel="tag">那一天我從MCU上學到的</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-那一天我從MCU上學到的-10" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/12/08/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-10/" class="article-date">
  <time class="dt-published" datetime="2025-12-08T06:59:14.000Z" itemprop="datePublished">2025-12-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/12/08/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-10/">那一天我從MCU上學到的(10)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>接續上篇，那時我正在開發全公司最新的產品，但不知道為什麼我的長官只派我一人去執行這件事情，不過我當時是很開心地執行這任務，因為這樣我可以實作我自己的想法，這種機會不多!從IC的kickoff到Tape out的過程是很繁瑣，這也是我第一次能從頭跟到尾一顆IC的誕生。在IC Tape Out前通常FW會幫忙數位RD除錯，例如寫一些test pattern在FPGA跑，幫助數位RD驗證電路timming的正確性。在FPGA階段時通常是unit test不會系統性測試。<br>當IC Tape out之後我們就需要將之前在FPGA寫的test pattern重新跑，畢竟FPGA是模擬環境實際電路在RUN時通常會有很多奇奇怪怪的問題，每當有問題時就需要量各路電壓是否正常?或是靠外灌某路電壓確認這路電壓是否異常等等。unit test順利的PASS後，重頭戲就是跑系統性測試，此時發現一件怪事，我用工具讀取IC的rawdata時有時會有異常數據很明顯與正常的值範圍差異過大，但問題大概要連續跑一小時才能復現一次。對於我來說不能輕易放過這問題，先確認自己的通訊模組是否異常的可能，然後就一步一步拆解自己寫的系統到底是哪一部分出現問題?debug其實很吃靈感與運氣的。當時我就將源頭的rawdata寫死定值想看看是否為類比端的問題。但結果卻出乎我意料還是有機率發生異常狀態。後來我一步一步拆解發現是除法器有機率FAIL但我們跑unit test時沒看到這問題啊!此時我只能一步一步將我的FW架構縮減看是否是設定到甚麼硬體暫存器所導致的。最後發現是TIMER與除法器同時發生時會導致錯誤。因此我寫一個針對此問題的test pattern給數位RD跑模擬看看是甚麼問題呢?最後他們排查後發現是除法器沒有對ISR進行保護。因為通常除法器的cycle數3~10個，此時ISR突然進來而IC沒有對除法器內的內容保護導致結果異常。光是這問題就搞了我一周時間。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jasonchenwork.github.io/2025/12/08/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-10/" data-id="cuidmD8Pjt7pezjaW6b7t05cy" data-title="那一天我從MCU上學到的(10)" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84/" rel="tag">那一天我從MCU上學到的</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-那一天我從MCU上學到的-9" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/12/05/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-9/" class="article-date">
  <time class="dt-published" datetime="2025-12-05T06:17:31.000Z" itemprop="datePublished">2025-12-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/12/05/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-9/">那一天我從MCU上學到的(9)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>今天講一些曾經遇到奇奇怪怪的BUG，我記得突然有一天我被分派到開發全新的產品，基本上要在IDE上開啟全新的空白專案，要從最一開始實作BootLoader與初始化硬體，先Load OSC&#x2F;Votalge trim code from OTP，再接下來設定通訊界面(ex:IIC&#x2F;SPI&#x2F;UART)，最後set STACK address等等。因為要從OTP讀取資料因此我還需要規劃OTP的空間，我簡單的設計OTP規劃將每一個表格可以燒入3次為上限，在OTP中用一個DICT紀錄每個TABLE目前燒錄第幾次，如果我將TABLE1寫入第一次完成後我會將DICT中TABLE1寫一個KEY(此KEY非0x00並且非0xFF防止被誤判)，如果現在我要燒第二次TABEL2時我會先將TABLE1_1st寫為0，然後在填TABLE1_2nd資訊，這樣設定的原因為OTP出廠為0xFF我們只能將bit1寫為bit0因此用0x00與0xFF代表此空間無效標記。當然我們將TABLE中資料讀取完成後可以放一個checksum來確保資料的正確性。這是非常簡易簡單方式規劃OTP空間。<br><img src="/images/OTPspace.JPG" alt="OTP space"><br>處理完BootLoader與初始化硬體佔整體進度20%，主要還有main app的部分要完成，這是全新的專案對當時的我來說有很多東西都是邊做邊學。不意外就開始採BUG，第一個問題是我發現某個ISR只能觸發一次，無法觸發第二次之後的問題。為此我還詢問數位RD這問題，我記得當時那位RD回應我說測試部門的已經測試完成沒問題應該是我的問題，所以我又自己跑去問測試部門的member，我來記得我一開始找他們時他們還很不友善可是這問題對他們來說是質疑他們的立場，當時我還只是個出社會幾年的小工程師而已。要如何處理這問題當然就是必須要用他們的語言來溝通，也因此我需要專門為這問題寫一個test pattern給他們讓大家知道不是我整個系統問題而是真的可能是硬體設計上的BUG!我們用我的test pattern跑模擬可以發現進入這個ISR後雖然我們pattern有清除ISR狀態但硬體線路錯誤導致我無法清除ISR狀態，也因此我根本無法清除ISR狀態就不可能讓這ISR再次觸發。其實這問題很簡單但最大的問題是如何通溝不同部門的人。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jasonchenwork.github.io/2025/12/05/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-9/" data-id="cuidJ0oQFu49ZCOruhoXsyMKM" data-title="那一天我從MCU上學到的(9)" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84/" rel="tag">那一天我從MCU上學到的</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-那一天我從MCU上學到的-8" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/12/04/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-8/" class="article-date">
  <time class="dt-published" datetime="2025-12-04T03:14:14.000Z" itemprop="datePublished">2025-12-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/12/04/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-8/">那一天我從MCU上學到的(8)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>MCU在更新FW時存在更新錯誤的風險導致整個產品無法動作問題，此時如果MCU中FLASH空夠大，我們可以多放一個Backup App來防止main app在更新失敗後還可以提供產品功能給使用者。因此在出廠產品時FLASH空間就擁有Backup App。<br>相對應的BootLoader流程也需要修改判斷main app是否合法若不合法就load backup app來執行。<br><img src="/images/DualFW.jpg" alt="DualFW"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jasonchenwork.github.io/2025/12/04/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-8/" data-id="cuid4cSntSZzQYfNRxVVjiTcz" data-title="那一天我從MCU上學到的(8)" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84/" rel="tag">那一天我從MCU上學到的</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-那一天我從MCU上學到的-7" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/12/04/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-7/" class="article-date">
  <time class="dt-published" datetime="2025-12-04T01:33:14.000Z" itemprop="datePublished">2025-12-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/12/04/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-7/">那一天我從MCU上學到的(7)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>今天我要講曾經在某專案上遇到我們的產品受到周邊元件發出的訊號影響到我們的產品導致我們產品行為異常。<br>收到issue的第一件事就是分析問題，要如何分析問題?通常是透過復現問題後錄製log。接下來透過log排查問題根源。目前這個問題歸類為我們產品抗雜訊能力不佳，但需要用FW硬解。首先解釋一下我們的產品會取樣N筆ADC資料後平均成一筆資料輸出資料給主機。正常情況我們獲得的資料是平坦，但受到干擾後訊號的變化會很大導致我們最後輸出的結果會不穩定，在大多情況我們使用median filter可以有效改善此問題，這median filter的使用情境只能在大多數的資料為對的情況，如果多數資料是受到干擾則無法有效。在解這問題時我嘗試使用許多FIR濾波器都無法有效改善。主因是這個雜訊源是混頻訊號，前前後後透過各種現成演算法都無法改善問題，最後我想到使用Sobel filter區分是否為stable or unstable 資料。最後只留下stable的資料，如果最後stable的資訊量過低則直接丟棄這一回合的資料重新進行擷取ADC。此時我覺得有學以致用的感覺以前在大學研究所的知識能使用到。這已經是好多年前的專案即便到現在我還是記憶猶新，憑自己能力處理完成一件事情是令人高興的!<br><img src="/images/noramlADCvsAbnormalADC.jpg" alt="normal vs abnoraml"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jasonchenwork.github.io/2025/12/04/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-7/" data-id="cuid24m-SiUv8EHxGCfAYvVfI" data-title="那一天我從MCU上學到的(7)" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84/" rel="tag">那一天我從MCU上學到的</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-那一天我從MCU上學到的-6" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/12/02/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-6/" class="article-date">
  <time class="dt-published" datetime="2025-12-02T10:13:30.000Z" itemprop="datePublished">2025-12-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/12/02/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-6/">那一天我從MCU上學到的(6)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>現在回想我剛出社會進入公司發現一件很神奇的事情，我們的產品在整機上分析除錯時會存成TXT檔案，但是存成的TXT檔案是一連串序列資料，我們需要花一兩小時用excel排版後才能正式分析問題。我記得我當時看到時很傻眼怎麼不做一個小工具幫忙呈現我們的資料呢?這不是應該由工具部門幫忙開發一個分析資料的程式嗎?這效率超低阿~後來我受不了<strong>就用C#開發一個可以回放排版的視窗程式</strong>。因為我實在受不了要花一堆時間手動排版這種太過單調的行為不如我花一個下午時間寫一個小工具出來。<br>我當時思考為什麼我的前輩能忍受這種事情呢?我當時的主管是數位部門空降來的，可能一點也不知道周邊軟體的重要性吧!擁有好的工具可以有效提升我們的工作效率，BTW我們部門還在用資料夾管理而非SVN或是GIT管理我們的專案。即使我們提出需求，似乎無法改善這類問題，只能期待新的主管對於軟體方面有好sense。這已經是我大概十年前的記憶了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jasonchenwork.github.io/2025/12/02/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-6/" data-id="cuidqq59TVUshTdwBxr6vCjTf" data-title="那一天我從MCU上學到的(6)" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84/" rel="tag">那一天我從MCU上學到的</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-那一天我從MCU上學到的-5" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/12/02/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-5/" class="article-date">
  <time class="dt-published" datetime="2025-12-02T05:44:34.000Z" itemprop="datePublished">2025-12-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/12/02/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-5/">那一天我從MCU上學到的(5)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>今天要來介紹一些FW理架構與簡單的實作出工具，對於大多數公司的IC產品對於客戶需求的差異都會想要最小的改動FW，畢竟如果每一次都需要針對客戶需求修改程式要付出的風險很大，公司也希望自家的產品可以交由FAE只修改參數來滿足客戶需求。因此對於FW端需求將各種參數提供給FAE或是客戶修改，在FW的程式碼簡單的實作方法就是將你要釋出的參數定義在輸出bin檔中固定位址。<br><img src="/images/FWparameterarea.jpg" alt="parameter area in main app"><br>以下是FW端簡單的實作</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> FW_VER 0x1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> projectname <span class="string">&quot;1234&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> other <span class="string">&quot;321&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INIT_PARAMETER1 100</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INIT_PARAMETER2 200</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> FWver;</span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> projectname[<span class="number">32</span>];</span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> other[<span class="number">16</span>];</span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> parameter1;</span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> parameter2;</span><br><span class="line">&#125;FWparameter;</span><br><span class="line"></span><br><span class="line">FWparameter code fwparameter _at_ <span class="number">0x300</span> = &#123;FW_VER,projectname,other,INIT_PARAMETER1,INIT_PARAMETER2&#125;;</span><br></pre></td></tr></table></figure>
<p>我將參數的位址定義在0x300<br>接下來我要設計一套工具可以修改bin固定的位置，並且我希望UI不需要每次的改動，若要要改動只改動工具中所需要文件，這樣就可以最大化利用UI工具畢竟FW端的參數會依據客戶們的需求不斷更新，如果將描述的部分放在UI工具中會導致當FW端修改新增某的參數時都需要同步修改，如果我們能在開發時就將此需求明確表達UI工具能最少可能的改動，可提升工具部門的效率，但現實層面跨部門的溝通很困難，常常都是各個部門各自為政，你明知道有更好的想法但迫於各種溝通成本導致默不出聲。這也是我想開始寫一些心得分享給大家的動機。<br>回到設計工具程式上，我需要一個主程式專門負責各參數呈現和一份文件能描述參數<br><img src="/images/parameterflow.jpg" alt="TOOL FLOW"></p>
<p><a target="_blank" rel="noopener" href="https://github.com/jasonchenwork/ParameterTool">我實作的參數小工具連結</a></p>
<pre><code>載入既有 .bin 固件檔案
依據 ConfigTable.xlsx 自動解析配置表結構
支援三種參數類型：
    Single：單一數值或字串
    1D：一維陣列（8bit 或 16bit）
    2D：二維陣列（使用 tksheet 提供表格編輯）
動態 NxN 矩陣支援（可依其他參數值動態決定行列數）
簡單的權限管理（目前僅 admin/admin 可取得完整權限）
修改後可直接另存為新的 .bin 檔案
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jasonchenwork.github.io/2025/12/02/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-5/" data-id="cuidWwwMn3Cwa1ua1AdCNl_DM" data-title="那一天我從MCU上學到的(5)" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84/" rel="tag">那一天我從MCU上學到的</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-那一天我從MCU上學到的-4" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/12/01/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-4/" class="article-date">
  <time class="dt-published" datetime="2025-12-01T02:06:11.000Z" itemprop="datePublished">2025-12-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/12/01/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-4/">那一天我從MCU上學到的(4)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>今天介紹MCU內部記憶體架構，目前我遇到的MCU記憶體架構主要可分為兩種:有PRAM，無PRAM。有PRAM架構的為MCU上電後會透過ROM CODE 或是硬體從FLASH般CODE至PRAM，最後在PRAM上執行程序。無PRAM架構的MCU無須以上上電流程因為MCU可以直接在FLASH上執行程序。現今我們家用電腦架構就是與有PRAM架構的MCU類似，主機上電後會從SD CARD or DISK中搬運OS至RAM中執行，而多數低階MCU尤其是8-bit MCU無PRAM而直接在FLASH上執行。為什麼會有這兩種不同的架構呢?主因是IC製程與成本因素所導致的。多一個PRAM空間會影響整體產品成本問題。既然能不需要PRAM則能省則省。<br>對IC設計公司來說產品面積越小越有競爭力，一片晶圓的面積是固定的，但能在一片晶圓中製作出多少顆DIE，全靠各家公司能力，如果同樣的產品你能在這片晶圓多別人1000顆DIE無疑是你的產品擁有更低成本的優勢，這也是多數IC設計公司在比拚的地方。<br>ROM:是不可以改變的，在晶圓製造時就已經決定好的<br>PRAM: 存放程序執行的記憶體空間<br>DRAM: 存放資料的記憶體空間<br>FLASH: 存放程式碼的空間<br>PS:現行許多架構會將PRAM與DRAM放置在同一個空間中<br><img src="/images/MCUmemoryar.jpg" alt="MCUmemoryar"></p>
<p>簡單的介紹MCU的硬體記憶體架構後，我要介紹FW架構:<br>MCU通常需要一個BootLoader可執行更新Main App部分，並且可偵測Main App是否完整。如果Main App不正常時需停留在BootLoader等待主機更新Main App。<br>流程如下:<br><img src="/images/BTflow.jpg" alt="BootLoader Flow"><br>大多時候ROM CODE可以取代BootLoader，但還是依照各種需求導致需要一個2nd Bootloader放至FLASH畢竟ROM沒辦法輕易修改。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jasonchenwork.github.io/2025/12/01/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-4/" data-id="cuidRbGhchswzvJMpxKFZXDjF" data-title="那一天我從MCU上學到的(4)" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84/" rel="tag">那一天我從MCU上學到的</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-那一天我從MCU上學到的-3" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/11/21/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-3/" class="article-date">
  <time class="dt-published" datetime="2025-11-21T09:01:02.000Z" itemprop="datePublished">2025-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/11/21/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-3/">那一天我從MCU上學到的(3)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>上次的issue是數位指令本身的限制，<strong>嚴格說起來不是BUG而是需要在DATASHEET中寫出的限制條件</strong>。<br>這次來說另一種問題，首先敘述一下從客戶端回饋的問題:我司產品在低溫到高溫的過程中功能失效。<br>一開始收到此issue時，第一件事就是想辦法復現客戶的問題啊，不過我們不斷反覆測試後都無法成功復現客戶所遇見的問題，因此我們將此問題轉換成是否有良率問題，不是每一個產品都會發生而是機率性發生在NG品中，後來我們就跟客戶協調是否能將有問題的產品退到我司來排查問題。<br>當我們一拿到客戶產品後我立馬就能復現此問題，能夠復現問題後就可以開始做實驗拉。<br>此時我的大主管要求我修改程式中參數，他猜想靠調整參數就可以解決，當我測試一兩次就發現這不是能靠調整參數的問題，在這情況下我們的產品完全無反應，此時我猜想在這種情況我們的產品是不是能活動，因此修改程式讓程式不管何時都會發送訊息給主機，以此判斷我們的產品是否能此情況下活動。結果不出我預測當我們NG品在低溫下就停止活動了!<br><strong>身為一個工程師當然不能只拿一個程式行為來說話</strong>，此時我使用示波器量測我們產品的行為，因為我們產品在活動時一定會打訊號出來，想當然不出所料低溫時我們的產品根本量不到訊號。最後我將我排查的結果提報給我大主管，而我大主管似乎沒能理解我做的實驗目的與結果，當下只給我下達將程式中某個參數改大一點後去測試。此時我心中只想說無腦服從他即便我花一整天解釋這方向錯誤但我的大主管很高的機率會告知我說:『你改一下參數會死嗎?』當時我只是一介菜鳥工程師所說的話一點都沒有份量即便我做了一堆實驗數據。就在此時剛好有一位資深工程師聽到我跟大主管的對話，立馬跳出來幫忙解釋，我看這位資深工程師講到快跟我們大主管吵架一樣後，終於理解產品可能的問題，之後就是請數位工程師跟我們一起排查問題，配合數位工程師寫一堆測試pattern與量測訊號，最後終於能定位產品中的某的電路因FAB良率問題有可以使我們的產品直接停止內部CLK。通常DEBUG越痛苦越能牢記在大腦，<strong>即便過這麼多年我還是記得當時的情況。每個公司文化都不一樣，沒有好跟壞，我們要做的是去適應去融入各種文化，而非抱怨各種事情，這樣才能使我們更強大!</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jasonchenwork.github.io/2025/11/21/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-3/" data-id="cuidGVCdZkg-ZQMK0HbGKW7yH" data-title="那一天我從MCU上學到的(3)" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84/" rel="tag">那一天我從MCU上學到的</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-那一天我從MCU上學到的-2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/11/20/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-2/" class="article-date">
  <time class="dt-published" datetime="2025-11-20T01:51:38.000Z" itemprop="datePublished">2025-11-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/11/20/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-2/">那一天我從MCU上學到的(2)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>今天來講過去我們部門遇到的一些問題，有一天我們的產品在特定的操作下出現不預期的結果，我簡單說明我們這產品的流程:當擷取硬體ADC的值後程式會先將ADC資料做簡單的濾波器在往下一步計算後輸出給主機端，其中的計算我簡化為:result&#x3D;sum(adc[i])&#x2F;sum(cnt[i])，當sum(adc[i])與sum(cnt[i])的值破萬時，result的值異常，我們找數位工程師討論結果為這顆MCU的除法器是使用橢圓演算法實作但當輸入的數值過大時會有問題，主要緣由是此算法是用近似疊代的方式逼近，當數值過大時會有無法收斂的情況。當我聽到時傻眼，如果有隱患的問題怎不寫入IC的SPEC中，因為這種問題很難發現到，除厝過程中我們只能一步一步地將每個函數都拆解然後鎖定每步的可能性。但對我們來說是要如何解決問題，最簡單粗暴的方式是當除數與被除數同時大於門檻值時就都同時往右位移想辦法讓除法器能夠收斂而非發散狀態。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jasonchenwork.github.io/2025/11/20/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-2/" data-id="cuidl2ry3Dy-h0-BnuR2GlXEI" data-title="那一天我從MCU上學到的(2)" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84/" rel="tag">那一天我從MCU上學到的</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">下一頁 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84/" rel="tag">那一天我從MCU上學到的</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤雲</h3>
    <div class="widget tagcloud">
      <a href="/tags/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84/" style="font-size: 10px;">那一天我從MCU上學到的</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">彙整</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/12/">十二月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/11/">十一月 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/12/10/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-11/">那一天我從MCU上學到的(11)</a>
          </li>
        
          <li>
            <a href="/2025/12/08/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-10/">那一天我從MCU上學到的(10)</a>
          </li>
        
          <li>
            <a href="/2025/12/05/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-9/">那一天我從MCU上學到的(9)</a>
          </li>
        
          <li>
            <a href="/2025/12/04/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-8/">那一天我從MCU上學到的(8)</a>
          </li>
        
          <li>
            <a href="/2025/12/04/%E9%82%A3%E4%B8%80%E5%A4%A9%E6%88%91%E5%BE%9EMCU%E4%B8%8A%E5%AD%B8%E5%88%B0%E7%9A%84-7/">那一天我從MCU上學到的(7)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 Jason Chen<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>